المهمة: إنشاء مشروع برمجي لبوت تلجرام (Telegram Bot) **احترافي كامل**
حسب الخطة والمواصفات التي سأزوّدك بها. الهدف: مشروع يمكن تسليمه كحزمة
متكاملة (ملفات المشروع، وثائق، اختبارات، وتجهيزات النشر) مع الالتزام
الصارم بمنهجية توزيع الملفات ومعايير الجودة.

نقاط إجبارية --- لا تفاوض: 1. **لا تبدأ بكتابة أي كود** قبل: (أ)
الانتهاء من نقاش تفصيلي مع صاحب المشروع حول المتطلبات والـ flow
والأذونات وواجهات الاستخدام، و(ب) الحصول على موافقة خطّية (نصية) صريحة
على الخطة النهائية. أي كود يُكتب قبل الموافقة يتم رفضه تلقائياً. 2. **لا
تعدل ملفات قائمة** بدون سؤال صريح. إذا رُيت ضرورة تعديل ملف قائم، اكتب
تقريرًا مختصرًا يشرح: سبب التعديل، البدائل، وطريقة الاختبار بعد التعديل.
انتظر موافقة قبل التنفيذ. 3. **لا تنشئ ملفات جديدة لوظيفة قائمة فعلاً**
--- إن وُجدت وظيفة بالفعل، يجب إعادة استخدامها أو تحسينها داخل نفس
الوحدة/المسار بعد موافقة صاحب المشروع. 4. **التزم بمنهجية توزيع
الملفات** التالية (أو التي سيحددها صاحب المشروع لاحقًا) ولا تخرج عنها
إلا بعد مناقشة واعتماد. 5. **لا تعتمد تسليم جزئي** كمنتج نهائي؛ لكن
يمكنك تقديم مسوّدات وتصاميم ومخططات أثناء مناقشة المتطلبات.

المخرجات المتوقعة (عند تسليم النسخة النهائية): - مشروع كامل في مجلد واحد
جاهز للنشر (zip) مع: - README مفصّل يتضمن: أهداف المشروع، متطلبات تشغيل،
خطوات إعداد محلي وبيئة إنتاج، متغيرات بيئة، وأوامر اختبار. - ملف
ARCHITECTURE.md يشرح بنية المشروع، توزيع الملفات، ونقاط التوسّع. - مجلد
`docs/` يحتوي على: مستندات واجهات المستخدم (flows)، مواصفات API (إن
وُجدت)، ومخططات ER لو كانت هناك قاعدة بيانات. - مجلد `tests/` مع
اختبارات وحدات واختبارات تكامل أساسية قابلة للتشغيل آليًا. - ملف
`CHANGELOG.md` بتنسيق مفهوم (Keep a Changelog). - ملف `Dockerfile` و
`docker-compose.yml` للتشغيل المحلي/احترافي إن أمكن. - سكربتات إعداد
قاعدة البيانات (migrations أو SQL) إن وُجدت DB. - إعداد CI بسيط (مثلاً:
GitHub Actions أو GitLab CI) لبناء واختبار المشروع. - ترحيل/نشر مستند
(deployment) يشرح خطوات النشر لـ Linux server و/أو Docker. - ترميز
وترتيب commmit messages وbranch strategy موضوعة في `CONTRIBUTING.md`.

معايير الجودة (Acceptance Criteria): - كل وظيفة يجب أن تمر بـ: تحليل
متطلبات → تصميم واجهة/flow → مراجعة الموافقة → كتابة كود → اختبارات →
توثيق → مراجعة أمنية أساسية → دمج. - الأكواد تتبع قواعد linter مناسبة
للغة المشروع (مثلاً ESLint للـJS/TS أو pylint/flake8 للبـPython). - لا
تسريب أسرار/مفاتيح داخل الريبو (استخدام ملفات env و `.env.example`). -
تغطية اختبارات للوحدات الحرجة لا تقل عن 60% (أو حسب الاتفاق). - الأداء:
التأكد من أن البوت يرد ضمن زمن مقبول (\<1s للعمليات الخفيفة) حسب
إمكانية. - الأمن: الحماية من هجمات common web vulnerabilities، والتحقق
من صحة المدخلات، وتعامل آمن مع التوكنات والبيانات الحساسة.

قواعد تواصل ومراحل العمل (Obligatory flow before coding): 1. **مرحلة
الاكتشاف** (Discovery): اجمع كل الأسئلة المفتوحة المتعلقة بالوظائف،
المتغيرات البيئية، قيود الشبكة، التكاملات (DB, APIs, Payment, File
storage)، وسيناريوهات الفشل. سلّم قائمة أسئلة واضحة. 2. **مرحلة
التصميم** (Design): قدّم ER diagram، sequence diagrams للـflows الرئيسة،
وملف `project-structure.md` يشرح أين تذهب كل وظيفة (مسارات الملفات). 3.
**مراجعة الموافقة**: صاحب المشروع يوافق (نصّي) على التصميم. فقط بعد هذه
الموافقة يُسمح بالبدء في الترميز. 4. **التطوير**: التزام بفروع
feature/issue، كل فرع PR واحد للميزة، وPR يجب أن يتضمن وصف التغييرات،
files changed، وكيفيّة الاختبار يدويًا. 5. **اختبارات وقبول**: بعد
الانتهاء، نفّذ اختبارات وحدة وتكامل، ثم سلّم نسخة staging للاختبار من
قبل صاحب المشروع. 6. **النشر**: فقط بعد توقيع صاحب المشروع على القبول
يتم نشر النسخة النهائية.

قواعد تعديل الملفات الموجودة: - قبل أي تعديل على ملف قائم: أرسل تقريرًا
قصيرًا (\< 200 كلمة) يوضح السبب والتبعات، واقترح بديلين على الأكثر. -
إذا كان التعديل أمني/عاجل (مثلاً ثغرة أمنية حقيقية)، حدّث الملف فورًا ثم
أبلغ بصيغة change-log مفصلة مع اختبار الاسترجاع. (لكن أمامك إثبات
للثغرة.)

أسلوب البرمجة ومتطلبات هندسة البرامج: - استخدم مبدأ الفصل (Separation of
Concerns) وModularization؛ كل ميزة في وحدة واحدة واضحة. - تعتمد الطبقات:
Presentation (bot handlers) --- Business logic --- Data access ---
Config. - ملفات الإعداد (config) مقسَّمة حسب البيئة، وبيانات الاعتماد لا
تُحفظ في الريبو. - Logging مركزي مع مستويات (INFO, WARN, ERROR) وقابلية
الربط بخدمة مراقبة لاحقًا. - Exceptions/Errors مع رسالة مفهومة وcodes إن
أمكن.

معايير التزام المخرجات بالمواصفات: - عند كل مرحلة تسليم، أدرج **قائمة
تحقق** (checklist) تبين البنود المكتملة والمعلقة. - جميع التغييرات يجب
أن ترفق بمثال اختبار (test-case) ووصف لأهم حالات الاستخدام وحالات الفشل
المتوقعة.

قواعد الـGit وPR: - Branch strategy: `main` (مستقر)، `develop` (تجميعي)،
`feature/<name>`, `hotfix/<name>`. - عناوين الـcommit بصيغة:
`TYPE(scope): short summary` (مثال:
`feat(bot): add invoice flow skeleton`). - كل PR يجب أن يمر بمراجعة
واحدة على الأقل من مطوّر آخر قبل الدمج.

أسئلة يجب طرحها قبل كتابة أي كود (الأداة ملزمة بطرحها): - ما هي قائمة
الوظائف الأساسية (MVP) والوظائف الغير أساسية؟ - أي أنظمة خارجية يجب
التكامل معها (قاعدة بيانات، APIs، Payment، Storage)؟ مع تزويد
الEndpoints/Docs إن وُجدت. - هل يوجد مشروع قائم يجب التوافق معه؟ ما
مسارات الملفات الرئيسة؟ هل أُرسِل لي نسخة من الريبو؟ - بيئة النشر
المستهدفة (Docker/Linux/Heroku/Azure/AWS)؟ - سياسة المفاتيح والتوكنات:
أين ستخزن؟ هل يوجد secret manager؟ - معايير الأداء والـSLA المطلوبة
للردود؟ - من سيجري الاختبارات النهائية ويعطي القبول؟

سلوكيات ممنوعة (Hard NOs): - لا تكتب أكواد قبل الموافقة النهائية على
التصميم. - لا تحذف ملفات قائمة إلا بعد تفصيل السبب وموافقة صريحة. - لا
تضع مفاتيح/توكنات/بيانات حساسة داخل الكود. - لا تُنشئ واجهات برمجية أو
ملفات تنفيذية جديدة لخدمة موجودة فعلاً دون إعادة استخدام الوحدة
القائمة. - لا تُغيّر بنية قاعدة البيانات دون خطة ترحيل (migration)
واختبارات استرجاع.

نمط اللغة والوثائق: - الوثائق بالعربية الفصحى (أو إن طلب صاحب المشروع
الإنجليزية، فنسخة مزدوجة). - استخدم لغة أعمال احترافية ومباشرة؛ لا تطيّل
في التعليقات غير المفيدة. - ضَع قائمة مصطلحات (Glossary) قصيرة للمفاهيم
الرئيسية في المشروع.

مخرجات إضافية مطلوبة مع كل إصدار: - ملف `deployment_checklist.md` خطوة
بخطوة. - `security_review.md` ملاحظات أمنية وأساسية للتحقق. -
`operational_runbook.md` (أوامر restart، health-check endpoints، وكيفية
إعادة التشغيل).

التسليم النهائي: - أرِفق ملف zip أو رابط git repository مع كل الملفات
المطلوبة، وملف `acceptance_report.md` يوضح كيف تم تحقيق كل بند في قائمة
المعايير.

التصرف في حال عدم وضوح المطلوب: - عند أي غموض، الأداة تضع قائمة أسئلة
(كما أعلاه) وتنتظر إجابات واضحة قبل التقدم. **لا** تلتزم افتراضات بديلة
إلا إن كانت معلنة وواضحة في ملف `assumptions.md`.

------------------------------------------------------------------------

التزام قانوني/مهني: - أي اقتباس أو اعتمادية على مكتبات خارجية يجب ذكر
اسم المكتبة وإصدارها ورابط الوثيقة (license). لا استخدام مكتبات ذات
تراخيص تمنع الاستخدام التجاري دون موافقة.

نهاية البرومت.
