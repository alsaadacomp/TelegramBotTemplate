{
  "id": "join-request",
  "name": "طلب الانضمام كمشرف",
  "description": "سير عمل لطلب الانضمام كمشرف معتمد في البوت",
  "icon": "🔐",
  "permissions": ["visitor"],
  "steps": [
    {
      "id": "step_name",
      "type": "input",
      "field": "full_name",
      "question": "📝 **طلب الانضمام - الخطوة 1 من 2**\n\nالرجاء إدخال **اسمك الكامل** بالعربية:\n\nمثال: أحمد محمد علي",
      "placeholder": "أدخل اسمك الكامل",
      "validation": {
        "required": true,
        "minLength": 3,
        "maxLength": 50,
        "pattern": "^[\\u0600-\\u06FF\\s]+$"
      },
      "errorMessage": "❌ الاسم يجب أن يكون بالعربية ومن 3-50 حرف"
    },
    {
      "id": "step_phone",
      "type": "input",
      "field": "phone",
      "question": "📝 **طلب الانضمام - الخطوة 2 من 2**\n\nالرجاء إدخال **رقم موبايلك** (مع كود الدولة):\n\nمثال: +20123456789\nأو: 0123456789",
      "placeholder": "أدخل رقم الموبايل",
      "validation": {
        "required": true,
        "pattern": "^[0-9٠-٩+]{10,15}$"
      },
      "transform": "normalizeArabicNumbers",
      "format": "phoneNumber",
      "errorMessage": "❌ رقم الموبايل غير صحيح"
    },
    {
      "id": "step_confirm",
      "type": "confirm",
      "question": "✅ **تأكيد البيانات**\n\n📋 **بياناتك:**\n• الاسم: {{full_name}}\n• الموبايل: {{phone}}\n• معرف Telegram: @{{username}}\n\nهل البيانات صحيحة؟",
      "summary": "**الاسم:** {{full_name}}\n**الموبايل:** {{phone}}",
      "confirmText": "✅ تأكيد الإرسال",
      "cancelText": "❌ إلغاء"
    }
  ],
  "onComplete": {
    "action": "saveJoinRequest",
    "table": "join_requests",
    "notification": {
      "success": "✅ **تم إرسال طلبك بنجاح!**\n\n📋 سيتم مراجعة طلبك من قبل الإدارة قريباً.\n\n⏳ **الرجاء الانتظار...**\nسنرسل لك إشعاراً فور اتخاذ القرار.\n\nشكراً لصبرك 🙏",
      "error": "❌ حدث خطأ أثناء إرسال الطلب\nالرجاء المحاولة مرة أخرى لاحقاً"
    },
    "notifyAdmin": true,
    "logAction": true,
    "nextAction": "return_to_start"
  },
  "onCancel": {
    "message": "❌ تم إلغاء طلب الانضمام",
    "returnTo": "start"
  }
}
